(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const s of e.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function a(r){if(r.ep)return;r.ep=!0;const e=n(r);fetch(r.href,e)}})();const f=document.querySelector(".burger"),p=document.querySelector(".burger__line"),h=document.querySelector(".nav"),g=document.querySelector("body"),v=document.querySelectorAll(".nav__item"),b=()=>{f.addEventListener("click",()=>{p.classList.toggle("line--hide"),f.classList.toggle("burger--transform"),h.classList.toggle("nav--hide"),g.classList.toggle("no-scroll")})},L=()=>{v.forEach(t=>{t.addEventListener("click",()=>{p.classList.remove("line--hide"),f.classList.remove("burger--transform"),h.classList.remove("nav--hide"),g.classList.remove("no-scroll")})})},u=document.querySelector(".list ul");window.addEventListener("DOMContentLoaded",async()=>{try{const t=await i();l(t)}catch(t){console.error("Ошибка загрузки данных:",t)}});const i=async()=>{const t=await fetch("http://localhost:3000/games");if(!t.ok)throw new Error(`HTTP error! ${t.status}`);return await t.json()},l=t=>{if(!u){console.error("Элемент .list ul не найден!");return}u.innerHTML="",t.forEach(o=>{u.insertAdjacentHTML("beforeend",`
		<li>${o.title}
			<div class="edit-inner">
				<button class="edit-btn action-btn btn--reset" data-id=${o.id}>✎</button>
				<button class="delete-btn action-btn btn--reset" data-id=${o.id}>&#10006</button>
			</div>
		</li>
		`)})},w=document.querySelector(".list ul"),E=async()=>{w.addEventListener("click",async t=>{if(t.target.classList.contains("delete-btn")){const o=t.target.dataset.id;try{if(confirm("Видалити гру?")){await T(o);const n=await i();l(n)}}catch(n){console.error("Ошибка удаления:",n)}}})},T=async t=>{const o=await fetch(`http://localhost:3000/games/${t}`,{method:"DELETE"});if(!o.ok)throw new Error(`HTTP error! ${o.status}`)},S=document.querySelector("form button"),m=document.querySelector("form input");S.addEventListener("click",async t=>{if(t.preventDefault(),!m.value.trim()){alert("Введите название игры");return}try{await q();const o=await i();l(o),m.value=""}catch(o){console.error("Ошибка:",o),alert("Не удалось добавить игру")}});const q=async()=>{const t=await fetch("http://localhost:3000/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:m.value.trim()})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`)},D=document.querySelector(".list ul");D.addEventListener("click",async t=>{if(t.target.classList.contains("edit-btn")){const o=t.target,n=o.closest("li"),a=o.dataset.id,r=n.querySelector(".game-title")||n.firstChild,e=document.createElement("input");e.type="text",e.classList.add("edit-input"),e.value=r.textContent.trim(),r.replaceWith(e),e.focus();const s=async()=>{e.removeEventListener("blur",s),e.removeEventListener("keydown",y);const c=e.value.trim();if(c&&c!==r.textContent.trim())try{await O(a,c);const d=await i();l(d)}catch(d){console.error("Ошибка:",d),e.replaceWith(r),alert("Ошибка обновления!")}else e.replaceWith(r)},y=c=>{c.key==="Enter"&&(c.preventDefault(),s()),c.key==="Escape"&&e.replaceWith(r)};e.addEventListener("blur",s),e.addEventListener("keydown",y)}});const O=async(t,o)=>{const n=await fetch(`http://localhost:3000/games/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o})});if(!n.ok)throw new Error(`HTTP error! ${n.status}`);return await n.json()};i();E();b();L();
